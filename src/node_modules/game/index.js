import 'game/style.css'; // webpack magic
import {Container, SCALE_MODES, settings, Sprite} from 'pixi.js';
delete window.PIXI; // hax
settings.SCALE_MODE = SCALE_MODES.NEAREST;

import raf from 'raf';
import {renderer} from 'game/resources';
import setup from 'game/setup';

setup().then(() => {
  const stage = new Container();
  const sprite = Sprite.fromFrame('bunny');
  window.sprite = sprite;
  sprite.anchor.set(0.5, 0.5);
  sprite.position.set(100, 100);
  sprite.scale.set(2);
  stage.addChild(sprite);
  let lastTime;
  raf(time => {
    lastTime = time;
  });
  const draw = time => {
    const delta = (time - lastTime)/1000;
    lastTime = time;
    sprite.rotation += Math.PI * 2 * delta;
    renderer.render(stage);
    raf(draw);
  };
  raf(draw);
});
