import 'game/style.css'; // webpack magic
import {SCALE_MODES, settings, Sprite} from 'pixi.js';
delete window.PIXI; // hax
settings.SCALE_MODE = SCALE_MODES.NEAREST;

import * as engine from 'engine';
import * as input from 'engine/input';
import Scene from 'engine/Scene';

class TestScene extends Scene {
  init() {
    const sprite = this.sprite = Sprite.fromFrame('bunny');
    sprite.anchor.set(0.5, 0.5);
    sprite.position.set(100, 100);
    sprite.scale.set(2);
    this.stage.addChild(sprite);
  }
  update(delta) {
    if (input.keyPressed('Space')) {
      this.backgroundColor = Math.floor(Math.random() * 0xFFFFFF);
    }
    this.sprite.rotation += 0.5 * Math.PI * 2 * delta;
    if (input.keyDown('KeyW')) {
      this.sprite.position.y -= 100 * delta;
    }
    if (input.keyDown('KeyA')) {
      this.sprite.position.x -= 100 * delta;
    }
    if (input.keyDown('KeyS')) {
      this.sprite.position.y += 100 * delta;
    }
    if (input.keyDown('KeyD')) {
      this.sprite.position.x += 100 * delta;
    }
  }
}

engine.launch(new TestScene());
